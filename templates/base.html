{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %} {% endblock %}</title>
    {% include 'tailwind.html' %}
    <script src="https://unpkg.com/alpinejs" defer></script>
</head>

<body>
    <header class='shadow-md bg-white font-[sans-serif] tracking-wide relative z-50'>

        <section
            class="flex items-center justify-center flex-wrap lg:justify-center gap-4 py-3 sm:px-10 px-4 border-gray-200 border-b min-h-[75px]">
            <img class="w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl h-auto"
                src="{% static 'images/cover.jpg' %}" alt="">
        </section>



        <div class='flex flex-wrap justify-center px-10 py-3 relative'>

            <div id="collapseMenu"
                class='max-lg:hidden lg:!block max-lg:before:fixed max-lg:before:bg-black max-lg:before:opacity-40 max-lg:before:inset-0 max-lg:before:z-50'>
                <button id="toggleClose" class='lg:hidden fixed top-2 right-4 z-[100] rounded-full bg-white p-3'>
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 fill-black" viewBox="0 0 320.591 320.591">
                        <path
                            d="M30.391 318.583a30.37 30.37 0 0 1-21.56-7.288c-11.774-11.844-11.774-30.973 0-42.817L266.643 10.665c12.246-11.459 31.462-10.822 42.921 1.424 10.362 11.074 10.966 28.095 1.414 39.875L51.647 311.295a30.366 30.366 0 0 1-21.256 7.288z"
                            data-original="#000000"></path>
                        <path
                            d="M287.9 318.583a30.37 30.37 0 0 1-21.257-8.806L8.83 51.963C-2.078 39.225-.595 20.055 12.143 9.146c11.369-9.736 28.136-9.736 39.504 0l259.331 257.813c12.243 11.462 12.876 30.679 1.414 42.922-.456.487-.927.958-1.414 1.414a30.368 30.368 0 0 1-23.078 7.288z"
                            data-original="#000000"></path>
                    </svg>
                </button>

                <ul
                    class='lg:flex lg:gap-x-10 max-lg:space-y-3 max-lg:fixed max-lg:bg-white max-lg:w-2/3 max-lg:min-w-[300px] max-lg:top-0 max-lg:left-0 max-lg:p-4 max-lg:h-full max-lg:shadow-md max-lg:overflow-auto z-50'>

                    <li class='max-lg:border-b max-lg:px-3 max-lg:py-3'><a href="{% url 'index' %}"
                            class='hover:text-[#007bff] text-[#007bff] font-semibold block text-[15px]'>Home</a></li>
                    <li class='group max-lg:border-b max-lg:px-3 max-lg:py-3 relative'>
                        <a href='javascript:void(0)'
                            class='hover:text-[#007bff] hover:fill-[#007bff] text-gray-600 font-semibold text-[15px] block'>Photo
                            Stories<svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px"
                                class="ml-1 inline-block" viewBox="0 0 24 24">
                                <path
                                    d="M12 16a1 1 0 0 1-.71-.29l-6-6a1 1 0 0 1 1.42-1.42l5.29 5.3 5.29-5.29a1 1 0 0 1 1.41 1.41l-6 6a1 1 0 0 1-.7.29z"
                                    data-name="16" data-original="#000000" />
                            </svg>
                        </a>
                        <ul
                            class='absolute top-5 max-lg:top-8 left-0 z-50 block space-y-2 shadow-lg bg-white max-h-0 overflow-hidden min-w-[250px] group-hover:opacity-100 group-hover:max-h-[700px] px-6 group-hover:pb-4 group-hover:pt-6 transition-all duration-500'>
                            {% for item in category %}
                            <li class='border-b py-3'>
                                <a href="{% url 'category' %}?type={{ item.type }}"
                                    class='hover:text-[#007bff] hover:fill-[#007bff] text-gray-600 font-semibold text-[15px] block'>
                                    {{item.type}}
                                </a>
                            </li>
                            {% endfor %}

                        </ul>
                    </li>
                    <li class='max-lg:border-b max-lg:px-3 max-lg:py-3'><a href='javascript:void(0)'
                            class='hover:text-[#007bff] text-gray-600 font-semibold text-[15px] block'>Projects</a></li>

                    <li class='max-lg:border-b max-lg:px-3 max-lg:py-3'>
                        <a href="{% url 'team' %}"
                            class='hover:text-[#007bff] text-gray-600 font-semibold text-[15px] block'>Members</a>
                    </li>
                    <li class='max-lg:border-b max-lg:px-3 max-lg:py-3'><a href="{% url 'about' %}"
                            class='hover:text-[#007bff] text-gray-600 font-semibold text-[15px] block'>About</a></li>
                    <li class='max-lg:border-b max-lg:px-3 max-lg:py-3'><a href="{% url 'donate' %}"
                            class='hover:text-[#007bff] text-gray-600 font-semibold text-[15px] block'>Donate</a></li>
                    <li class='max-lg:border-b max-lg:px-3 max-lg:py-3'>
                        <a href="{% url 'submit_article' %}"
                            class='hover:text-[#007bff] text-gray-600 font-semibold text-[15px] block'>Submit-Article</a>
                    </li>

                </ul>
            </div>

            <div id="toggleOpen" class='flex ml-auto lg:hidden'>
                <button>
                    <svg class="w-7 h-7" fill="#000" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                            clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>
    <main>
        {% block content%}
        <div class="max-w-screen-xl mx-auto p-5 sm:p-10 md:p-16">
            <!-- Search Bar -->
            <form method="get" class="mb-5">
                <input type="text" name="search" value="{{ search_query }}" placeholder="Search..."
                    class="border p-2 rounded w-full" />
                <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded mt-2">
                    Search
                </button>
            </form>

            <!-- Grid of Items -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-10">
                {% for item in page_obj %}
                <div
                    class="border border-gray-400 bg-white rounded-lg flex flex-col justify-between leading-normal shadow-md">
                    {% if item.images.exists %}
                    <a href="{% url 'post_detail' item.slug %}">
                        <img src="{{ item.images.first.image.url }}" class="w-full mb-3 rounded-t-lg"
                            alt="{{ item.title }}"> </a>
                    {% endif %}

                    <div class="p-4 pt-2">
                        <div class="mb-8">

                            <a href="{% url 'post_detail' item.slug %}"
                                class="text-gray-900 font-bold text-lg mb-2 hover:text-indigo-600 inline-block">
                                {{ item.title }}</a>

                        </div>
                        <div class="flex items-center">
                            <a href="#"><img class="w-10 h-10 rounded-full mr-4"
                                    src="{{ item.author.profile_image.url }}"
                                    alt="Avatar of {{ item.author.first_name }}" /></a>
                            <div class="text-sm">
                                <a href="{% url 'team_profile' item.author.id %}"
                                    class="text-gray-900 font-semibold leading-none hover:text-indigo-600">
                                    {{ item.author.first_name }} {{ item.author.last_name }}</a>
                                <p class="text-gray-600">{{ item.publication_date }}</p>
                            </div>
                        </div>

                    </div>
                </div>
                {% empty %}
                <p>No items found.</p>
                {% endfor %}
            </div>

            <div class="flex justify-center items-center mt-6">
                <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                    {% if page_obj.has_previous %}
                    <a href="?page={{ page_obj.previous_page_number }}&search={{ search_query }}"
                        class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                        <span class="sr-only">Previous</span>
                        <!-- Heroicon name: chevron-left -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                        </svg>
                    </a>
                    {% endif %}
                    {% for page_num in page_obj.paginator.page_range %}
                    <a href="?page={{ page_num }}&search={{ search_query }}"
                        class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium {% if page_obj.number == page_num %}text-gray-700 bg-gray-200{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                        {{ page_num }}
                    </a>
                    {% endfor %}
                    {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}&search={{ search_query }}"
                        class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                        <span class="sr-only">Next</span>
                        <!-- Heroicon name: chevron-right -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                        </svg>
                    </a>
                    {% endif %}
                </nav>
            </div>
        </div>
        {% endblock %}

    </main>

    <footer class="bg-gray-700 text-white w-full py-10">
        <div class="max-w-screen-xl mx-auto px-5 sm:px-8 md:px-12">
            <nav class="flex justify-center flex-wrap gap-6 text-gray-500 font-medium">
                <a class="text-white text-center" href="{% url 'index' %}">Home</a>
                {% for item in category %}
                <a class="text-white text-center" href="{% url 'category' %}?type={{ item.type }}">
                    {{item}}
                </a>
                {% endfor %}
                <a class="text-white text-center" href="{% url 'team' %}">Members</a>
                <a class="text-white text-center" href="{% url 'about' %}">About</a>
                <a class="text-white text-center" href="{% url 'donate' %}">Donate</a>
            </nav>

            <div class="flex justify-center space-x-5 m-4">
                <a href="https://whatsapp.com/channel/0029VagC0lX7DAX4z1Ynyg0z" target="_blank"
                    rel="noopener noreferrer">
                    <img class="w-8 h-8 rounded-full" src="{% static 'images/WhatsApp.png'%}" />
                </a>
                <a href="https://facebook.com" target="_blank" rel="noopener noreferrer">
                    <img class="w-8 h-8 rounded-full" src="{% static 'images/facebook.png'%}" />
                </a>
                <a href="https://www.instagram.com/chitrakathe4u?igsh=MWtwamtkY2o5OW1kMg==" target="_blank"
                    rel="noopener noreferrer">
                    <img class="w-8 h-8 rounded-full" src="{% static 'images/instagram.png'%}" />
                </a>
                <a href="https://x.com/chitrakathe4u?t=ZfzCXMOvEulgHzI6TtRQvw&s=08" target="_blank"
                    rel="noopener noreferrer">
                    <img class="w-8 h-8 rounded-full" src="{% static 'images/twitter.png'%}" />
                </a>

            </div>
            <p class="text-center text-white font-medium">&copy; {{year}} <a href="{% url 'index' %}">chitrakathe</a>.
                All rights reservered.</p>
        </div>
    </footer>


    <script>

        var toggleOpen = document.getElementById('toggleOpen');
        var toggleClose = document.getElementById('toggleClose');
        var collapseMenu = document.getElementById('collapseMenu');

        function handleClick() {
            if (collapseMenu.style.display === 'block') {
                collapseMenu.style.display = 'none';
            } else {
                collapseMenu.style.display = 'block';
            }
        }

        toggleOpen.addEventListener('click', handleClick);
        toggleClose.addEventListener('click', handleClick);
    </script>


</body>

</html>